CREATE PROCEDURE `spAddTaxonInternal`(\n    IN  pGenusId            INT,\n    IN  pSpeciesName        VARCHAR(100),\n    IN  pHybridName         VARCHAR(150),\n    IN  pGrowthNotes        TEXT,\n    IN  pTaxonNotes         TEXT,\n    IN  pIsSystemManaged    TINYINT(1),\n    OUT pTaxonId            INT\n)\nBEGIN\n    DECLARE vSpeciesName VARCHAR(100);\n    DECLARE vHybridName  VARCHAR(150);\n    DECLARE vGrowthNotes TEXT;\n    DECLARE vTaxonNotes  TEXT;\n\n    -- Normalise inputs\n    SET vSpeciesName = NULLIF(TRIM(pSpeciesName), '');\n    SET vHybridName  = NULLIF(TRIM(pHybridName), '');\n    SET vGrowthNotes = NULLIF(TRIM(pGrowthNotes), '');\n    SET vTaxonNotes  = NULLIF(TRIM(pTaxonNotes), '');\n\n    INSERT INTO taxon (\n        genusId,\n        speciesName,\n        hybridName,\n        growthNotes,\n        taxonNotes,\n        isSystemManaged\n    )\n    VALUES (\n        pGenusId,\n        vSpeciesName,\n        vHybridName,\n        vGrowthNotes,\n        vTaxonNotes,\n        pIsSystemManaged\n    );\n\n    SET pTaxonId = LAST_INSERT_ID();\nEND	utf8mb4	utf8mb4_0900_ai_ci	utf8mb4_unicode_ci

