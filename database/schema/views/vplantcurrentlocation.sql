CREATE VIEW `vplantcurrentlocation` AS select `plh`.`plantLocationHistoryId` AS `plantLocationHistoryId`,`plh`.`plantId` AS `plantId`,`plh`.`locationId` AS `locationId`,`l`.`locationName` AS `locationName`,`l`.`locationTypeCode` AS `locationTypeCode`,`plh`.`startDateTime` AS `locationStartDateTime`,`p`.`plantTag` AS `plantTag`,`p`.`plantName` AS `plantName`,`s`.`taxonId` AS `taxonId`,(case when (`s`.`speciesName` is not null) then concat(`g`.`genusName`,' ',`s`.`speciesName`) when (`s`.`hybridName` is not null) then concat(`g`.`genusName`,' ',`s`.`hybridName`) else `g`.`genusName` end) AS `displayName` from ((((`plantlocationhistory` `plh` join `location` `l` on((`l`.`locationId` = `plh`.`locationId`))) join `plant` `p` on((`p`.`plantId` = `plh`.`plantId`))) join `taxon` `s` on((`s`.`taxonId` = `p`.`taxonId`))) join `genus` `g` on((`g`.`genusId` = `s`.`genusId`))) where (`plh`.`endDateTime` is null);

